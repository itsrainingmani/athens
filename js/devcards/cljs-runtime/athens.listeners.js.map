{"version":3,"sources":["athens/listeners.cljs"],"mappings":";;;;;;;;AA4BA,AAAA,AAAMA,AACHC;AADH,AAEE,AAAA,AAAAC,AAAMC,AAAS,AAAAC,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAACC,AAAAA,AAAAA;;AACVC,AAAQ,AAAA,AAAA,AAAIL;AADlB,AAEE,AAAM,AAAAM,AAAKJ;AAAL,AAAA,AAAAI;AAAa,AAAA,AAAMD;;AAAnBC;;;AAAN,AACE,AAAAC,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAACC,AAAAA,AAAAA;;AADH;;;AAOJ,AAAA,AAAMC,AACHT;AADH,AAEE,AAAMU,AAAI,AAAIV;AACRW,AAAK,AAAIX;AACTY,AAAK,AAAIZ;AACTa,AAAM,AAAIb;AAHhB,AAKE,AACE,AAAA,AAAAM,AAAK,AAACQ,AAAEJ,AAAIK,AAAYH;AAAxB,AAAA,AAAAN;AAA6BO;;AAA7BP;;AAAA;AACA,AAAAU,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAACR,AAAAA,AAAAA;;AAFH,AAIE,AAAA,AAAK,AAACM,AAAEJ,AAAIK,AAAYH;AACxB,AAAAK,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAACT,AAAAA,AAAAA;;AALH,AAOE,AAAA,AAAK,AAACM,AAAEJ,AAAIQ,AAAYN;AACxB,AAAAO,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAACX,AAAAA,AAAAA;;AARH,AAUE,AAAA,AAAK,AAACM,AAAEJ,AAAIU,AAAYT;AACxB,AAAAU,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAACb,AAAAA,AAAAA;;AAXH,AAaE,AAAA,AAAK,AAACM,AAAEJ,AAAIY,AAAYX;AACxB,AAAAY,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAACf,AAAAA,AAAAA;;AAdH,AAgBE,AAAA,AAAK,AAACM,AAAEJ,AAAIc,AAAYb;AACxB,AAAAc,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAACjB,AAAAA,AAAAA;;AAjBH;;;;;;;;AAoBJ,AAAA,AAAMkB;AAAN,AAGE,AAACC,AAAcC,AAAUC,AAAoB9B;;AAC7C,AAAC4B,AAAcC,AAAUE,AAAkBrB","names":["athens.listeners/mouse-down-outside-athena","e","cljs.core/deref","athena?","G__61754","re-frame.core/subscribe","closest","and__4174__auto__","G__61755","re-frame.core/dispatch","athens.listeners/key-down","key","ctrl","meta","shift","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","goog.events.KeyCodes/Z","G__61756","G__61757","goog.events.KeyCodes/K","G__61758","goog.events.KeyCodes/G","G__61759","goog.events.KeyCodes/R","G__61760","goog.events.KeyCodes/L","G__61761","athens.listeners/init","goog.events/listen","js/window","goog.events.EventType/MOUSEDOWN","goog.events.EventType/KEYDOWN"],"sourcesContent":["(ns athens.listeners\n  (:require\n    ;;[athens.util :refer [get-day]]\n    [cljsjs.react]\n    [cljsjs.react.dom]\n    [goog.events :as events]\n    [re-frame.core :refer [dispatch subscribe]])\n  (:import\n    (goog.events\n      EventType\n      KeyCodes)))\n\n\n;; -- Turn read block or header into editable on mouse down --------------\n\n;; (defn edit-block\n;;   [e]\n;;   ;; Consider refactor if we add more editable targets\n;;   (let [closest-block (.. e -target (closest \".block-content\"))\n;;         closest-block-header (.. e -target (closest \".block-header\"))\n;;         closest-page-header (.. e -target (closest \".page-header\"))\n;;         closest (or closest-block closest-block-header closest-page-header)]\n;;     (when closest\n;;       (dispatch [:editing/uid (.. closest -dataset -uid)]))))\n\n\n;; -- Close Athena -------------------------------------------------------\n\n(defn mouse-down-outside-athena\n  [e]\n  (let [athena? @(subscribe [:athena/open])\n        closest (.. e -target (closest \".athena\"))]\n    (when (and athena? (nil? closest))\n      (dispatch [:athena/toggle]))))\n\n\n;; -- Hotkeys ------------------------------------------------------------\n\n\n(defn key-down\n  [e]\n  (let [key (.. e -keyCode)\n        ctrl (.. e -ctrlKey)\n        meta (.. e -metaKey)\n        shift (.. e -shiftKey)]\n\n    (cond\n      (and (= key KeyCodes.Z) meta shift)\n      (dispatch [:redo])\n\n      (and (= key KeyCodes.Z) meta)\n      (dispatch [:undo])\n\n      (and (= key KeyCodes.K) meta)\n      (dispatch [:athena/toggle])\n\n      (and (= key KeyCodes.G) ctrl)\n      (dispatch [:devtool/toggle])\n\n      (and (= key KeyCodes.R) ctrl)\n      (dispatch [:right-sidebar/toggle])\n\n      (and (= key KeyCodes.L) ctrl)\n      (dispatch [:left-sidebar/toggle]))))\n\n\n(defn init\n  []\n  ;; (events/listen js/window EventType.MOUSEDOWN edit-block)\n  (events/listen js/window EventType.MOUSEDOWN mouse-down-outside-athena)\n  (events/listen js/window EventType.KEYDOWN key-down))\n\n"]}