{"version":3,"sources":["athens/views/settings_page.cljs"],"mappings":";;AAQA,AAAA,AAAMA,AACHC;AADH,AAEE,AAAA,AAAIC;;AACJ,AAAA,AAAIC;;AACJ,AAAA,AAAA,AAACC;;AACD,AAAA,AAACC,AAAOJ;;AAGV,AAAA,AAAMK,AACHL;AADH,AAEE,AAAA,AAAIE;;AACJ,AAAA,AAAID;;AACJ,AAAA,AAAA,AAACE;;AACD,AAAA,AAACC,AAAOJ;;AAGV,AAAA,AAAMM,AACHC;AADH,AAEE,AAAA,AAAA,AAACJ;;AACD,AAAA,AAACC,AAAOG;;AAGV,AAAA,AAAMC,AACHD;AADH,AAEE,AAAA,AAAA,AAACJ;;AACD,AAAA,AAACC,AAAOG;;AAGV,AAAA,AAAME,AACHF;AADH,AAEE,AAAA,AAAAG,AAAKH;AACH,AAACC,AAAiBD;;AAClB,AAACD,AAAYC;;;AAGjB,AAAA,AAAMI,AACHX;AADH,AAEE,AAAA,AAAAU,AAAKV;AACH,AAACK,AAAOL;;AACR,AAACD,AAAQC;;;AAGb,AAAA,AAAMY;AAAN,AAEE,AAAMZ,AAAW,AAACa,AAAO,AAAA,AAAIX;AACvBK,AAAsB,AAACM,AAAO,AAACC;AADrC,AAEE;AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAKG,AAAA,AAAAJ,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKV,AAIHe,AAAkB,AAAA,AAAAL,AAASV;AAThC,AAUwB,AAACW,AAAaX;AAVtC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAWK,AAAA,AAAAU,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKV,AAEEgB,AAGAC,AAUPF,AAAiB,AAAA,AAAAL,AAAQH;AA1B9B,AA2BwB,AAACE,AAAUF;AAC9B,AAAA,AAAAG,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKH,AAEEU,AAGAD","names":["athens.views.settings-page/opt-out","opted-out?","js/posthog","js/window","js/localStorage.setItem","cljs.core/reset!","athens.views.settings-page/opt-in","athens.views.settings-page/remember-ws","remember-window-size?","athens.views.settings-page/dont-remember-ws","athens.views.settings-page/handle-ws","cljs.core/deref","athens.views.settings-page/handle-click","athens.views.settings-page/settings-page","reagent.core.atom","athens.util/remember-ws?","athens.views.buttons/button","js/module$node_modules$$material_ui$icons$index.ToggleOn","js/module$node_modules$$material_ui$icons$index.ToggleOff"],"sourcesContent":["(ns athens.views.settings-page\n  (:require\n    [\"@material-ui/icons\" :as mui-icons]\n    [athens.util :refer [remember-ws?]]\n    [athens.views.buttons :refer [button]]\n    [reagent.core :as r]))\n\n\n(defn opt-out\n  [opted-out?]\n  (.. js/posthog (capture \"opt-out\"))\n  (.. js/window -posthog opt_out_capturing)\n  (js/localStorage.setItem \"sentry\" \"off\")\n  (reset! opted-out? true))\n\n\n(defn opt-in\n  [opted-out?]\n  (.. js/window -posthog opt_in_capturing)\n  (.. js/posthog (capture \"opt-in\"))\n  (js/localStorage.setItem \"sentry\" \"on\")\n  (reset! opted-out? false))\n\n\n(defn remember-ws\n  [remember-window-size?]\n  (js/localStorage.setItem \"ws/remember-ws\" \"on\")\n  (reset! remember-window-size? true))\n\n\n(defn dont-remember-ws\n  [remember-window-size?]\n  (js/localStorage.setItem \"ws/remember-ws\" \"off\")\n  (reset! remember-window-size? false))\n\n\n(defn handle-ws\n  [remember-window-size?]\n  (if @remember-window-size?\n    (dont-remember-ws remember-window-size?)\n    (remember-ws remember-window-size?)))\n\n\n(defn handle-click\n  [opted-out?]\n  (if @opted-out?\n    (opt-in opted-out?)\n    (opt-out opted-out?)))\n\n\n(defn settings-page\n  []\n  (let [opted-out? (r/atom (.. js/window -posthog has_opted_out_capturing))\n        remember-window-size? (r/atom (remember-ws?))]\n    (fn []\n      [:div {:style {:display \"flex\"\n                     :margin \"0vh 5vw\"\n                     :flex-direction \"column\"}}\n       [:h2 \"Settings\"]\n       (if @opted-out?\n         [:h5 \"Opted Out of Analytics\"]\n         [:h5 \"Opted Into Analytics\"])\n       [:div {:style {:margin \"10px 0\"}}\n        [button {:primary  (false? @opted-out?)\n                 :on-click #(handle-click opted-out?)}\n         (if @opted-out?\n           [:div {:style {:display \"flex\"}}\n            [:> mui-icons/ToggleOn]\n            [:span \"\\uD83D\\uDE41 We understand.\"]]\n           [:div {:style {:display \"flex\"}}\n            [:> mui-icons/ToggleOff]\n            [:span \"\\uD83D\\uDE00 Thanks for helping make Athens better!\"]])]]\n       [:span \"Analytics are anonymized and delivered by \"\n        [:a {:href \"https://posthog.com\" :target \"_blank\"} \"Posthog\"]\n        \" and \" [:a {:href \"https://sentry.io\" :target \"_blank\"} \"Sentry\"]\n        \", open-source solutions to measure retention, performance, and crashes.\n         This lets the designers and engineers at Athens know if we're really making something people love!\"]\n       [:br]\n       [:h5 \"Remember the last Window Size on Athens Startup\"]\n       [:div {:style {:margin \"10px 0\"}}\n        [button {:primary (true? @remember-window-size?)\n                 :on-click #(handle-ws remember-window-size?)}\n         (if @remember-window-size?\n           [:div {:style {:display \"flex\"}}\n            [:> mui-icons/ToggleOff]\n            [:span \"\\uD83D\\uDE00 Yes!\"]]\n           [:div {:style {:display \"flex\"}}\n            [:> mui-icons/ToggleOn]\n            [:span \"\\uD83D\\uDE41 No.\"]])]]])))\n\n\n"]}