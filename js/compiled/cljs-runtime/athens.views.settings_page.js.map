{"version":3,"sources":["athens/views/settings_page.cljs"],"mappings":"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","names":["athens.views.settings-page/opt-out","opted-out?","js/posthog","js/window","js/localStorage.setItem","cljs.core/reset!","athens.views.settings-page/opt-in","athens.views.settings-page/handle-click","cljs.core/deref","athens.views.settings-page/remember-ws","remember-window-size?","athens.views.settings-page/dont-remember-ws","athens.views.settings-page/handle-ws","athens.views.settings-page/handle-debounce-save-input","value","debounce-time","athens.electron/debounce-write-db","goog.functions/debounce","athens.electron/write-db","athens.views.settings-page/settings-page","reagent.core.atom","debounce-save-time!","js/Number","js/localStorage.getItem","athens.util/remember-ws?","p1__64165#","athens.views.buttons/button","js/module$node_modules$$material_ui$icons$index.ToggleOn","js/module$node_modules$$material_ui$icons$index.ToggleOff","cljs.core.prn","G__64166"],"sourcesContent":["(ns athens.views.settings-page\n  (:require\n   [\"@material-ui/icons\" :as mui-icons]\n   [athens.electron :as electron]\n   [athens.util :refer [remember-ws?]]\n   [athens.views.buttons :refer [button]]\n   [goog.functions :as goog-functions]\n   [reagent.core :as r]))\n\n\n(defn opt-out\n  [opted-out?]\n  (.. js/posthog (capture \"opt-out\"))\n  (.. js/window -posthog opt_out_capturing)\n  (js/localStorage.setItem \"sentry\" \"off\")\n  (reset! opted-out? true))\n\n\n(defn opt-in\n  [opted-out?]\n  (.. js/window -posthog opt_in_capturing)\n  (.. js/posthog (capture \"opt-in\"))\n  (js/localStorage.setItem \"sentry\" \"on\")\n  (reset! opted-out? false))\n\n\n(defn handle-click\n  [opted-out?]\n  (if @opted-out?\n    (opt-in opted-out?)\n    (opt-out opted-out?)))\n\n\n(defn remember-ws\n  [remember-window-size?]\n  (js/localStorage.setItem \"ws/remember-ws\" \"on\")\n  (reset! remember-window-size? true))\n\n\n(defn dont-remember-ws\n  [remember-window-size?]\n  (js/localStorage.setItem \"ws/remember-ws\" \"off\")\n  (reset! remember-window-size? false))\n\n\n(defn handle-ws\n  [remember-window-size?]\n  (if @remember-window-size?\n    (dont-remember-ws remember-window-size?)\n    (remember-ws remember-window-size?)))\n\n\n(defn handle-debounce-save-input\n  [value debounce-time]\n  (when (and (<= 0 value) (<= value 1000))\n    (reset! debounce-time value)\n    (set! electron/debounce-write-db (goog-functions/debounce electron/write-db (* 1000 value)))\n    (js/localStorage.setItem \"debounce-save-time\" value)))\n\n\n(defn settings-page\n  []\n  (let [opted-out?            (r/atom (.. js/window -posthog has_opted_out_capturing))\n        debounce-save-time!   (r/atom (js/Number (js/localStorage.getItem \"debounce-save-time\")))\n        remember-window-size? (r/atom (remember-ws?))]\n    (fn []\n      [:div {:style {:display        \"flex\"\n                     :margin         \"0vh 5vw\"\n                     :flex-direction \"column\"}}\n       [:h2 \"Settings\"]\n\n       ;; Analytics\n       (if @opted-out?\n         [:h5 \"Opted Out of Analytics\"]\n         [:h5 \"Opted Into Analytics\"])\n       [:div {:style {:margin \"10px 0\"}}\n        [button {:primary  (false? @opted-out?)\n                 :on-click #(handle-click opted-out?)}\n         (if @opted-out?\n           [:div {:style {:display \"flex\"}}\n            [:> mui-icons/ToggleOn]\n            [:span \"\\uD83D\\uDE41 We understand.\"]]\n           [:div {:style {:display \"flex\"}}\n            [:> mui-icons/ToggleOff]\n            [:span \"\\uD83D\\uDE00 Thanks for helping make Athens better!\"]])]]\n       [:span \"Analytics are anonymized and delivered by \"\n        [:a {:href \"https://posthog.com\" :target \"_blank\"} \"Posthog\"]\n        \" and \" [:a {:href \"https://sentry.io\" :target \"_blank\"} \"Sentry\"]\n        \", open-source solutions to measure retention, performance, and crashes.\n         This lets the designers and engineers at Athens know if we're really making something people love!\"]\n\n       ;; Auto-save\n       [:div {:style {:margin \"20px 0\"}}\n        [:h5 \"Auto-save\"]\n        [:div {:style {:display \"flex\" :justify-content \"space-between\"\n                       :margin \"10px 0\"}}\n         [:input {:style {:width \"4em\"}\n                  :type  \"number\" :value @debounce-save-time! :on-change #(handle-debounce-save-input (js/Number (.. % -target -value)) debounce-save-time!)}]\n         (prn \"type\" @debounce-save-time! (js/Number @debounce-save-time!))\n         (case @debounce-save-time!\n           0 [:span (str \"Athens will save and create a backup after each edit.\")]\n           1 [:span (str \"Athens will save and create a backup \" @debounce-save-time! \" second after your last edit.\")]\n           [:span (str \"Athens will save and create a backup \" @debounce-save-time! \" seconds after your last edit.\")])]]\n\n       ;; Remember Window Size\n       [:h5 \"Remember the last Window Size on Athens Startup\"]\n       [:div {:style {:margin \"10px 0\"}}\n        [button {:primary (true? @remember-window-size?)\n                 :on-click #(handle-ws remember-window-size?)}\n         (if @remember-window-size?\n           [:div {:style {:display \"flex\"}}\n            [:> mui-icons/ToggleOff]\n            [:span \"\\uD83D\\uDE00 Yes!\"]]\n           [:div {:style {:display \"flex\"}}\n            [:> mui-icons/ToggleOn]\n            [:span \"\\uD83D\\uDE41 No.\"]])]]])))\n\n"]}